<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            text-align: center;
        }

        #enterDetails {
            float: left;
            width: 45%;
            background-color: #a176e9;
            color: black;
            border-radius: 10px;
        }

        #findDetails {
            float: right;
            width: 45%;
            height: 445px;
            background-color: #a176e9;
            color: black;
            border-radius: 10px;
            
        }

        input {
            width: 120px;
        }
         input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
    </style>
</head>

<body>
    <div id="enterDetails">
        <h1>Enter details</h1>


        <h4>Class</h4>
        <select id="enterClass">
            <option value="9thA">9thA</option>
            <option value="9thB">9thB</option>
            <option value="9thC">9thC</option>
            <option value="9thD">9thD</option>
            <option value="10thA">10thA</option>
            <option value="10thB">10thB</option>
            <option value="10thC">10thC</option>
            <option value="10thD">10thD</option>
            <option value="10thE">10thE</option>
            <option value="10thF">10thF</option>
            <option value="11thA">11thA</option>
            <option value="11thB">11thB</option>
            <option value="11thC">11thC</option>
            <option value="11thD">11thD</option>
        </select>
        <h4>Student ID</h4>
        <input id="enterID" type="text">

        <h4>Name</h4>
        <input id="enterName" type="text">

        <h4>Roll no</h4>
        <input id="enterRoll" type="number"> <br><br>

        <button id="insert" onClick="window.location.reload();">Add</button>
        <button id="update">UPDATE</button>
        <button id="remove">REMOVE</button> <br><br>
    </div>

    <div id="findDetails">
        <h1>Find by Student ID</h1>
        <h4>Class</h4>
        <select id="findClass">
            <option value="9thA">9thA</option>
            <option value="9thB">9thB</option>
            <option value="9thC">9thC</option>
            <option value="9thD">9thD</option>
            <option value="10thA">10thA</option>
            <option value="10thB">10thB</option>
            <option value="10thC">10thC</option>
            <option value="10thD">10thD</option>
            <option value="10thE">10thE</option>
            <option value="10thF">10thF</option>
            <option value="11thA">11thA</option>
            <option value="11thB">11thB</option>
            <option value="11thC">11thC</option>
            <option value="11thD">11thD</option>
        </select>
        <h4>Student ID</h4>
        <input id="findID" type="text"> <br><br>
        <button id="find" >FIND</button>
        <h3 id="StudentID" type="number"></h3> 
        <h3 id="findName" type="text"></h3>
        <h3 id="findRoll" type="number"></h3> <br><br>
    </div>

    <script src="script.js"></script>
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-analytics.js";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
    apiKey: "AIzaSyD6bgLk52L4RL64K6g6M-cqEr7hytM7Mq8",
    authDomain: "attendance-app-28cd2.firebaseapp.com",
    databaseURL: "https://attendance-app-28cd2-default-rtdb.firebaseio.com",
    projectId: "attendance-app-28cd2",
    storageBucket: "attendance-app-28cd2.appspot.com",
    messagingSenderId: "1063572994138",
    appId: "1:1063572994138:web:8a657853aca0ffde894063",
    measurementId: "G-LK4GTLGL7Q"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);

import { getDatabase, ref, get, set, child, update, remove }
    from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";

const db = getDatabase();

let enterID = document.querySelector("#enterID");
let enterName = document.querySelector("#enterName");
let enterRoll = document.querySelector("#enterRoll");

let findID = document.querySelector("#findID");
let findName = document.querySelector("#findName");
let findRoll = document.querySelector("#findRoll");
let StudentID = document.querySelector("#StudentID");
let findClass = document.querySelector("#findClass");

let insertBtn = document.querySelector("#insert");
let updateBtn = document.querySelector("#update");
let removeBtn = document.querySelector("#remove");
let findBtn = document.querySelector("#find");

// adding students details
function InsertData() {
    set(ref(db, `Class/${enterClass.value}/${enterID.value}`), {
        Name: enterName.value,
        StudentID: enterID.value,
        Rollno: enterRoll.value
    })
        .then(() => {
            alert("Data added successfully");
        })
        .catch((error) => {
            alert(error);
        });
}

//finding students details
function FindData() {
    const dbref = ref(db);

    get(child(dbref, `Class/${findClass.value}//${findID.value}`))
        .then((snapshot) => {
            if (snapshot.exists()) {
                findName.innerHTML = "Name: " + snapshot.val().Name;
                findRoll.innerHTML = "Roll no: " + snapshot.val().Rollno;
                StudentID.innerHTML = "Student ID: " + snapshot.val().StudentID;
            } else {
                alert("No data found");
            }
        })
        .catch((error) => {
            alert(error)
        })

}

//Updating students details
function UpdateData() {
    update(ref(db, `Class/${enterClass.value}/${enterID.value}`), {
        Name: enterName.value,
        Rollno: enterRoll.value
    })
        .then(() => {
            alert("Data updated successfully");
        })
        .catch((error) => {
            alert(error);
        });
}

//removeing students details
function RemoveData() {
    remove(ref(db, `Class/${enterClass.value}/${enterID.value}`))
        .then(() => {
            alert("Data deleted successfully");
        })
        .catch((error) => {
            alert(error);
        });
}

insertBtn.addEventListener('click', InsertData);
updateBtn.addEventListener('click', UpdateData);
removeBtn.addEventListener('click', RemoveData);
findBtn.addEventListener('click', FindData);


    </script>
</body>

</html>